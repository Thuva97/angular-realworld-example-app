!function(){function t(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function r(t,r){for(var e=0;e<r.length;e++){var i=r[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{ALb8:function(r,i,o){"use strict";o.r(i),o.d(i,"EditorModule",function(){return C});var n,c=o("ey9i"),a=o("lJxs"),s=o("JIr8"),l=o("fXoL"),b=o("tyNb"),u=((n=function(){function r(e,i,o){t(this,r),this.articlesService=e,this.router=i,this.userService=o}return e(r,[{key:"resolve",value:function(t,r){var e=this;return this.articlesService.get(t.params.slug).pipe(Object(a.a)(function(t){if(e.userService.getCurrentUser().username===t.author.username)return t;e.router.navigateByUrl("/")}),Object(s.a)(function(t){return e.router.navigateByUrl("/")}))}}]),r}()).\u0275fac=function(t){return new(t||n)(l.Pb(c.a),l.Pb(b.c),l.Pb(c.f))},n.\u0275prov=l.Eb({token:n,factory:n.\u0275fac}),n),f=o("M0ag"),d=o("3Pt+"),p=o("ofXK");function h(t,r){if(1&t&&(l.Lb(0,"div",16),l.kc(1),l.Kb()),2&t){var e=l.Ub();l.yb(1),l.mc(" title ",e.errors.errors.title[0]," ")}}function g(t,r){if(1&t&&(l.Lb(0,"div",16),l.kc(1),l.Kb()),2&t){var e=l.Ub();l.yb(1),l.mc(" description ",e.errors.errors.description[0]," ")}}function m(t,r){if(1&t&&(l.Lb(0,"div",16),l.kc(1),l.Kb()),2&t){var e=l.Ub();l.yb(1),l.mc(" body ",e.errors.errors.body[0]," ")}}function v(t,r){if(1&t){var e=l.Mb();l.Lb(0,"span",17),l.Lb(1,"i",18),l.Sb("click",function(){l.fc(e);var t=r.$implicit;return l.Ub().removeTag(t)}),l.Kb(),l.kc(2),l.Kb()}if(2&t){var i=r.$implicit;l.yb(2),l.mc(" ",i," ")}}var y,L,k,K=((y=function(){function r(e,i,o,n){t(this,r),this.articlesService=e,this.route=i,this.router=o,this.fb=n,this.article={},this.tagField=new d.c,this.errors={errors:{}},this.isSubmitting=!1,this.articleForm=this.fb.group({title:"",description:"",body:""}),this.article.tagList=[]}return e(r,[{key:"ngOnInit",value:function(){var t=this;this.route.data.subscribe(function(r){r.article&&(t.article=r.article,t.articleForm.patchValue(r.article))})}},{key:"addTag",value:function(){var t=this.tagField.value;this.article.tagList.indexOf(t)<0&&this.article.tagList.push(t),this.tagField.reset("")}},{key:"removeTag",value:function(t){this.article.tagList=this.article.tagList.filter(function(r){return r!==t})}},{key:"submitForm",value:function(){var t=this;this.isSubmitting=!0,this.errors={errors:{}},this.updateArticle(this.articleForm.value),this.articlesService.save(this.article).subscribe(function(r){return t.router.navigateByUrl("/article/"+r.slug)},function(r){t.errors=r,t.isSubmitting=!1})}},{key:"updateArticle",value:function(t){Object.assign(this.article,t)}}]),r}()).\u0275fac=function(t){return new(t||y)(l.Ib(c.a),l.Ib(b.a),l.Ib(b.c),l.Ib(d.b))},y.\u0275cmp=l.Cb({type:y,selectors:[["app-editor-page"]],decls:30,vars:7,consts:[[1,"editor-page"],[1,"container","page"],[1,"row"],[1,"col-md-10","offset-md-1","col-xs-12"],[3,"formGroup"],[3,"disabled"],[1,"form-group"],[2,"font-weight","bold"],["formControlName","title","type","text","placeholder","Article Title",1,"form-control"],["style","color:#CF563C; font-weight: bold;",4,"ngIf"],["formControlName","description","type","text","placeholder","What's this article about?",1,"form-control"],["formControlName","body","rows","8","placeholder","Write your article (in markdown)",1,"form-control"],["type","text","placeholder","Enter tags",1,"form-control",3,"formControl","keyup.enter"],[1,"tag-list"],["class","tag-default tag-pill",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-lg","pull-xs-right","btn-primary",3,"click"],[2,"color","#CF563C","font-weight","bold"],[1,"tag-default","tag-pill"],[1,"ion-close-round",3,"click"]],template:function(t,r){1&t&&(l.Lb(0,"div",0),l.Lb(1,"div",1),l.Lb(2,"div",2),l.Lb(3,"div",3),l.Lb(4,"form",4),l.Lb(5,"fieldset",5),l.Lb(6,"fieldset",6),l.Lb(7,"label",7),l.kc(8,"Title"),l.Kb(),l.Jb(9,"input",8),l.jc(10,h,2,1,"div",9),l.Kb(),l.Lb(11,"fieldset",6),l.Lb(12,"label",7),l.kc(13,"Description"),l.Kb(),l.Jb(14,"input",10),l.jc(15,g,2,1,"div",9),l.Kb(),l.Lb(16,"fieldset",6),l.Lb(17,"label",7),l.kc(18,"Body"),l.Kb(),l.Lb(19,"textarea",11),l.kc(20,"              "),l.Kb(),l.jc(21,m,2,1,"div",9),l.Kb(),l.Lb(22,"fieldset",6),l.Lb(23,"label",7),l.kc(24,"Tags"),l.Kb(),l.Lb(25,"input",12),l.Sb("keyup.enter",function(){return r.addTag()}),l.Kb(),l.Lb(26,"div",13),l.jc(27,v,3,1,"span",14),l.Kb(),l.Kb(),l.Lb(28,"button",15),l.Sb("click",function(){return r.submitForm()}),l.kc(29," Publish Article "),l.Kb(),l.Kb(),l.Kb(),l.Kb(),l.Kb(),l.Kb(),l.Kb()),2&t&&(l.yb(4),l.ac("formGroup",r.articleForm),l.yb(1),l.ac("disabled",r.isSubmitting),l.yb(5),l.ac("ngIf",r.errors.errors.title),l.yb(5),l.ac("ngIf",r.errors.errors.description),l.yb(6),l.ac("ngIf",r.errors.errors.body),l.yb(4),l.ac("formControl",r.tagField),l.yb(2),l.ac("ngForOf",r.article.tagList))},directives:[d.m,d.i,d.f,d.a,d.h,d.e,p.k,d.d,p.j],encapsulation:2}),y),w=[{path:"",component:K,canActivate:[c.b]},{path:":slug",component:K,canActivate:[c.b],resolve:{article:u}}],F=((k=function r(){t(this,r)}).\u0275fac=function(t){return new(t||k)},k.\u0275mod=l.Gb({type:k}),k.\u0275inj=l.Fb({imports:[[b.f.forChild(w)],b.f]}),k),C=((L=function r(){t(this,r)}).\u0275fac=function(t){return new(t||L)},L.\u0275mod=l.Gb({type:L}),L.\u0275inj=l.Fb({providers:[u],imports:[[f.a,F]]}),L)}}])}();