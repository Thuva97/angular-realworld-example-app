(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{ALb8:function(t,r,e){"use strict";e.r(r),e.d(r,"EditorModule",function(){return y});var i=e("ey9i"),o=e("lJxs"),s=e("JIr8"),c=e("fXoL"),a=e("tyNb");let l=(()=>{class t{constructor(t,r,e){this.articlesService=t,this.router=r,this.userService=e}resolve(t,r){return this.articlesService.get(t.params.slug).pipe(Object(o.a)(t=>{if(this.userService.getCurrentUser().username===t.author.username)return t;this.router.navigateByUrl("/")}),Object(s.a)(t=>this.router.navigateByUrl("/")))}}return t.\u0275fac=function(r){return new(r||t)(c.Pb(i.a),c.Pb(a.c),c.Pb(i.f))},t.\u0275prov=c.Eb({token:t,factory:t.\u0275fac}),t})();var n=e("M0ag"),b=e("3Pt+"),u=e("ofXK");function d(t,r){if(1&t&&(c.Lb(0,"div",16),c.kc(1),c.Kb()),2&t){const t=c.Ub();c.yb(1),c.mc(" title ",t.errors.errors.title[0]," ")}}function f(t,r){if(1&t&&(c.Lb(0,"div",16),c.kc(1),c.Kb()),2&t){const t=c.Ub();c.yb(1),c.mc(" description ",t.errors.errors.description[0]," ")}}function p(t,r){if(1&t&&(c.Lb(0,"div",16),c.kc(1),c.Kb()),2&t){const t=c.Ub();c.yb(1),c.mc(" body ",t.errors.errors.body[0]," ")}}function h(t,r){if(1&t){const t=c.Mb();c.Lb(0,"span",17),c.Lb(1,"i",18),c.Sb("click",function(){c.fc(t);const e=r.$implicit;return c.Ub().removeTag(e)}),c.Kb(),c.kc(2),c.Kb()}if(2&t){const t=r.$implicit;c.yb(2),c.mc(" ",t," ")}}let g=(()=>{class t{constructor(t,r,e,i){this.articlesService=t,this.route=r,this.router=e,this.fb=i,this.article={},this.tagField=new b.c,this.errors={errors:{}},this.isSubmitting=!1,this.articleForm=this.fb.group({title:["",b.l.required],description:["",b.l.required],body:["",b.l.required]}),this.article.tagList=[]}ngOnInit(){this.route.data.subscribe(t=>{t.article&&(this.article=t.article,this.articleForm.patchValue(t.article))})}addTag(){const t=this.tagField.value;this.article.tagList.indexOf(t)<0&&this.article.tagList.push(t),this.tagField.reset("")}removeTag(t){this.article.tagList=this.article.tagList.filter(r=>r!==t)}submitForm(){this.isSubmitting=!0,this.errors={errors:{}},this.updateArticle(this.articleForm.value),this.articlesService.save(this.article).subscribe(t=>this.router.navigateByUrl("/article/"+t.slug),t=>{this.errors=t,this.isSubmitting=!1})}updateArticle(t){Object.assign(this.article,t)}}return t.\u0275fac=function(r){return new(r||t)(c.Ib(i.a),c.Ib(a.a),c.Ib(a.c),c.Ib(b.b))},t.\u0275cmp=c.Cb({type:t,selectors:[["app-editor-page"]],decls:30,vars:8,consts:[[1,"editor-page"],[1,"container","page"],[1,"row"],[1,"col-md-10","offset-md-1","col-xs-12"],[3,"formGroup"],[3,"disabled"],[1,"form-group"],[2,"font-weight","bold"],["formControlName","title","type","text","placeholder","Article Title",1,"form-control"],["style","color:#CF563C; font-weight: bold;",4,"ngIf"],["formControlName","description","type","text","placeholder","What's this article about?",1,"form-control"],["formControlName","body","rows","8","placeholder","Write your article (in markdown)",1,"form-control"],["type","text","placeholder","Enter tags",1,"form-control",3,"formControl","keyup.enter"],[1,"tag-list"],["class","tag-default tag-pill",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-lg","pull-xs-right","btn-primary",3,"disabled","click"],[2,"color","#CF563C","font-weight","bold"],[1,"tag-default","tag-pill"],[1,"ion-close-round",3,"click"]],template:function(t,r){1&t&&(c.Lb(0,"div",0),c.Lb(1,"div",1),c.Lb(2,"div",2),c.Lb(3,"div",3),c.Lb(4,"form",4),c.Lb(5,"fieldset",5),c.Lb(6,"fieldset",6),c.Lb(7,"label",7),c.kc(8,"Title"),c.Kb(),c.Jb(9,"input",8),c.jc(10,d,2,1,"div",9),c.Kb(),c.Lb(11,"fieldset",6),c.Lb(12,"label",7),c.kc(13,"Description"),c.Kb(),c.Jb(14,"input",10),c.jc(15,f,2,1,"div",9),c.Kb(),c.Lb(16,"fieldset",6),c.Lb(17,"label",7),c.kc(18,"Body"),c.Kb(),c.Lb(19,"textarea",11),c.kc(20,"              "),c.Kb(),c.jc(21,p,2,1,"div",9),c.Kb(),c.Lb(22,"fieldset",6),c.Lb(23,"label",7),c.kc(24,"Tags"),c.Kb(),c.Lb(25,"input",12),c.Sb("keyup.enter",function(){return r.addTag()}),c.Kb(),c.Lb(26,"div",13),c.jc(27,h,3,1,"span",14),c.Kb(),c.Kb(),c.Lb(28,"button",15),c.Sb("click",function(){return r.submitForm()}),c.kc(29," Publish Article "),c.Kb(),c.Kb(),c.Kb(),c.Kb(),c.Kb(),c.Kb(),c.Kb()),2&t&&(c.yb(4),c.ac("formGroup",r.articleForm),c.yb(1),c.ac("disabled",r.isSubmitting),c.yb(5),c.ac("ngIf",r.errors.errors.title),c.yb(5),c.ac("ngIf",r.errors.errors.description),c.yb(6),c.ac("ngIf",r.errors.errors.body),c.yb(4),c.ac("formControl",r.tagField),c.yb(2),c.ac("ngForOf",r.article.tagList),c.yb(1),c.ac("disabled",!r.articleForm.valid))},directives:[b.m,b.i,b.f,b.a,b.h,b.e,u.k,b.d,u.j],encapsulation:2}),t})();const m=[{path:"",component:g,canActivate:[i.b]},{path:":slug",component:g,canActivate:[i.b],resolve:{article:l}}];let v=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=c.Gb({type:t}),t.\u0275inj=c.Fb({imports:[[a.f.forChild(m)],a.f]}),t})(),y=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=c.Gb({type:t}),t.\u0275inj=c.Fb({providers:[l],imports:[[n.a,v]]}),t})()}}]);